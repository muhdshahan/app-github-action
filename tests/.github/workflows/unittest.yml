name: Python CI

# Trigger the workflow on any push to main branch or pull request
on:
  push: # Event
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs: # The jobs we need to do or run
  test: # The name of the job
    runs-on: ubuntu-latest # container provided by github, we also may get windows and mac-os containers also

    steps: # Specifies the workflow steps

    # Step 1
    - name: Check out code  # Performing checkout the code (triggering an event where we take code from repository and check it out so that it can be moved towards the container and can be tested over there)
      uses: actions/checkout@v4  # uses the prebuilt github action
    
    # Step 2: Setup Python environment
    - name: Set up Python 3.10
      uses: actions/setup-python@v3 # action predefined by github to create python environment
      with: # with is for adding more functionalities when creating this environment
        python-version: "3.10"

    # Step 3: Install dependencies    
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt

    # Step 4: Run tests
    - name: Run tests
      run: |
        pytest